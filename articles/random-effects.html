<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light">
<script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/3/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Random effects in baseline logit models and conditional logit models • mclogit</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Random effects in baseline logit models and conditional logit models">
<meta property="og:description" content="mclogit">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/3/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/3/darkly/bootstrap.css" media="(prefers-color-scheme: dark)">
<!-- preferably CSS --><link rel="stylesheet" href="../preferably.css">
<link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)">
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mclogit</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    </li>
<li class="dropdown-header">The statistical models</li>
    <li>
      <a href="../articles/conditional-logit.html">Conditional logit models</a>
    </li>
    <li>
      <a href="../articles/baseline-logit.html">Baseline-category logit models</a>
    </li>
    <li>
      <a href="../articles/baseline-and-conditional-logit.html">The relation between baseline logit and conditional logit models</a>
    </li>
    <li>
      <a href="../articles/random-effects.html">Random effects in baseline logit models and conditional logit models</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Technical aspects of model fitting</li>
    <li>
      <a href="../articles/fitting-mclogit.html">The IWLS algorithm used to fit conditional logit models</a>
    </li>
    <li>
      <a href="../articles/approximations.html">Approximate Inference for Multinomial Logit Models with Random Effects</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/melff/mclogit/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
        
        


      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Random effects in baseline logit models and
conditional logit models</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/melff/mclogit/blob/HEAD/../vignettes/random-effects.Rmd" class="external-link"><code>../vignettes/random-effects.Rmd</code></a></small>
      <div class="hidden name"><code>random-effects.Rmd</code></div>

    </div>

    
    
<p>The “mclogit” package allows for the presence of random effects in
baseline-category logit and conditional logit models. In
baseline-category logit models, the random effects may represent
(unobserved) characteristics that are common the individuals in
clusters, such as regional units or electoral districts or the like. In
conditional logit models, random effects may represent attributes that
share across several choice occasions within the same context of choice.
That is, if one analyses voting behaviour across countries then an
random effect specific to the Labour party may represent unobserved
attributes of this party in terms of which it differs from (or is more
like) the Social Democratic Party of Germany (SPD). My original
motivation for working on conditional logit models with random effects
was to make it possible to assess the impact of parties’ political
positions on the patterns of voting behaviour in various European
countries. The results of this research are published in an article in
<span class="citation">Elff (2009)</span>.</p>
<p>In its earliest incarnation, the package supported only a very simple
random-intercept extension of conditional logit models (or “mixed
conditional logit models”, hence the name of the package). These models
can be written as</p>
<p><span class="math display">\[
\pi_{ij} =
\frac{\exp(\eta_{ij})}{\sum_{k\in\mathcal{S}_i}\exp(\eta_{ik})}
\]</span></p>
<p>with</p>
<p><span class="math display">\[
\eta_{ij}=\sum_h\alpha_hx_{hij}+\sum_kz_{ik}b_{jk}
\]</span></p>
<p>where <span class="math inline">\(x_{hij}\)</span> represents values
of independent variables, <span class="math inline">\(\alpha_h\)</span>
are coefficients, <span class="math inline">\(z_{ik}\)</span> are dummy
ariables (that are equal to <span class="math inline">\(1\)</span> if
<span class="math inline">\(i\)</span> is in cluster <span class="math inline">\(k\)</span> and equal to <span class="math inline">\(0\)</span> otherwise), <span class="math inline">\(b_{jk}\)</span> are random effects with a normal
distribution with expectation <span class="math inline">\(0\)</span> and
variance parameter <span class="math inline">\(\sigma^2\)</span>.</p>
<p>Later releases also added support for baseline-category logit models
(initially only without random effects). In order to support random
effects in baseline-category logit models, the package had to be further
modified to allow for conditional logit models with random slopes (this
is so because baseline-categoy logit models can be expressed as a
particular type of conditional logit models).</p>
<p>It should be noted that estimating the parameters of random effects
multinomial logit models (whether of baseline-category logit variety or
the conditional logit variety) involves the considerable challenges
already known from the “generalized linear mixed models” literature. The
main challenge is that the likelihood function involves analytically
intractable integrals (i.e. there is know way to “solve” or eliminate
the intergrals from the formula of the likelihood function). This means
that either computationally intensive methods for the computation of
such integrals have to be used or certain approximations (most notably
the Laplace approximation technique and its variants), which may lead to
biases in certain situations. The “mclogit” package only supports
approximate likelihood-based inference. Most of the time the
PQL-technique based on a (first-order) Laplace approximation was
supported, release 0.8, “mclogit” also supports the MQL technique, which
is based on a (first-order) Solomon-Cox approximation. The ideas behind
the PQL and MQL techniques are described e.g. in <span class="citation">Breslow and Clayton (1993)</span>.</p>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-breslow.clayton:approximate.inference.glmm" class="csl-entry">
Breslow, Norman E., and David G. Clayton. 1993. <span>“Approximate
Inference in Generalized Linear Mixed Models.”</span> <em>Journal of the
American Statistical Association</em> 88 (421): 9–25.
</div>
<div id="ref-elff:divisions.positions.voting" class="csl-entry">
Elff, Martin. 2009. <span>“Social Divisions, Party Positions, and
Electoral Behaviour.”</span> <em>Electoral Studies</em> 28 (2): 297–308.
<a href="https://doi.org/10.1016/j.electstud.2009.02.002" class="external-link">https://doi.org/10.1016/j.electstud.2009.02.002</a>.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Martin Elff.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
